<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <!-- 1. 强制让文档的宽度与设备的宽度保持1:1，并且文档最大的宽度比例是1.0，且不允许用户点击屏幕放大浏览。 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" />
  <!-- 2. WebApp全屏模式 隐藏地址栏。 -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- 3. 禁止百度转码显示。 -->
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <!-- 4. 制定iphone中safari顶端的状态条的样式（default:白色，black:黑色，black-translucent：半透明） -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- 5. 添加到IOS主屏后的标题。 -->
  <meta name="apple-mobile-web-app-title" content="标题名称">
  <title>Document</title>

  <link rel="stylesheet" href="../FrontEndPackage/css/mui.css">
  <script src="http://code.jquery.com/jquery-2.0.0.min.js"></script>
  <link rel="stylesheet" href="cssrest.css" />
  <link rel="stylesheet" href="icon/iconfont.css" />
  <style>
    .mui-radio.mui-left input[type='radio'],
    .mui-checkbox.mui-left input[type='checkbox'] {
      left: 0;
    }

    .mui-radio.mui-left label,
    .mui-checkbox.mui-left label {
      padding-left: 33px;
    }

    #mydiv {
      padding: 1rem 0 0 1rem;
      width: 100%;
    }

    ul>li {
      cursor: pointer;
      height: 2.8rem;
      /* line-height: 3rem; */
      display: inline-block;
      width: 100%;
      /* background: #F5F6F7; */
    }

    ul>li:hover {
      background: #f5f6f7;
    }

    .li_a {
      width: 80%;
      float: left;
    }

    .li_b {
      width: 15%;
      float: right;
      text-align: right;
      margin: .5rem 1rem 0 0;
    }

    .li_hide {
      display: none;
    }

    .nav_active {
      color: #dddddd;
    }
  </style>
  <script>
    $(function () {
      var data = [
        { id: 1, pId: 0, name: '北京', num: 0 },
        { id: 2, pId: 0, name: '天津' },
        { id: 3, pId: 0, name: '上海' },
        { id: 6, pId: 0, name: '重庆' },
        { id: 4, pId: 0, name: '河北省', num: 3 },
        { id: 41, pId: 4, name: '石家庄' },
        { id: 42, pId: 4, name: '保定' },
        { id: 43, pId: 4, name: '邯郸' },
        { id: 44, pId: 4, name: '承德' },
        { id: 5, pId: 0, name: '广东省' },
        { id: 51, pId: 5, name: '广州' },
        { id: 52, pId: 5, name: '深圳' },
        { id: 53, pId: 5, name: '东莞' },
        { id: 54, pId: 5, name: '佛山' },
        { id: 6, pId: 0, name: '福建省' },
        { id: 61, pId: 6, name: '福州' },
        { id: 62, pId: 6, name: '厦门' },
        { id: 63, pId: 6, name: '泉州' },
        { id: 64, pId: 6, name: '三明' }
      ];

      js(data[4], data);
      // for (var i = 0; i < data.length; i++) {
      //   data[i].num = js(data[i], data);
      // }
      // console.log(data)

      var htm = ""
      $.each(data, function (index, item) {
        var li_hide = "li_hide";
        if (item.pId == 0) {
          li_hide = "";
        }
        htm += `<li kid="${item.id}" pid="${item.pId}" text="${item.name}" class="${li_hide}">
                  <div class="li_a">
                    <div class="mui-input-row mui-checkbox mui-left">
                      <label>${item.name}</label>
                      <input name="checkbox" value="${item.id}" type="checkbox">
                    </div>
                  </div>
                  <div class="li_b" title="下一级">
                    <span class="icon iconfont"></span> <span>下级</span>
                  </div>
                </li>`;
      })

      $("#my_ul").append(htm);

      $(".li_b").click(function () {
        //获取父元素
        var sli = $(this).parent("li");
        nextselect(sli);
      });
    });

    // function js(data) {
    //   var childs = node.children, item;
    //   //对node的处理
    //   if (node) {
    //     arr_dom.push(node);
    //   }
    //   for (var i = 0; i < childs.length; i++) {
    //     item = childs[i];
    //     if (item.nodeType === 1) {
    //       //递归先序遍历子节点
    //       preOrder(item);
    //     }
    //   }
    // }

    //选择下拉
    function nextselect(self) {
      var id = $(self).attr("kid");
      var name = $(self).attr("text");

      $("#my_ul>li").hide();
      $("#my_ul>li[pid=" + id + "]").show();
      $("#nav>a").removeClass("nav_active");
      $("#nav>a[kid='" + id + "']").addClass("nav_active");
      $("#nav").append(
        '<span class="slash"> > </span>'
        + ' <a href="#" kid="' + id + '" text="' + name + '" class="nav_active" onclick="nextselect(this),deldom(this)">' +
        "<span>" +
        name +
        "</span>" +
        "</a>"
      );
    }
    //移除后面标签
    function deldom(self) {
      $(self)
        .nextAll()
        .remove();
    }
  </script>
</head>

<body>
  <div id="mydiv">
    <div id="nav">
      <a href="#" kid="0" text="公司" class="sel nav_active" onclick="nextselect(this),deldom(this)">
        <span>公司</span>
      </a>
      <!-- <span class="slash">/</span> -->
    </div>

    <ul id="my_ul">
      <!-- <li kid="1" pid="0" text="总裁办公室">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>总裁办公室</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li>
      <li kid="2" pid="0">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>总裁办公室</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li>
      <li kid="3" pid="0">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>总裁办公室</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li>
      <li kid="4" pid="0">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>管理员</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b li_hide" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li>
      <li class="li_hide" kid="5" pid="1" text="移动事业组">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>移动事业组</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li>
      <li class="li_hide" kid="6" pid="1">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>基础业务组</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li>
      <li class="li_hide" kid="7" pid="1">
        <div class="li_a">
          <div class="mui-input-row mui-checkbox mui-left">
            <label>移动事业组</label>
            <input name="checkbox" value="1" type="checkbox">
          </div>
        </div>
        <div class="li_b" title="下一级">
          <span class="icon iconfont"></span> <span>下级</span>
        </div>
      </li> -->
    </ul>
  </div>
</body>

</html>